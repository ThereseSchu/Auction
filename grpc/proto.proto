syntax = "proto3";
option go_package = "ITUserver/grpc";

message Bid { //Bid tager et ID, et bud, en seq et slambert timestamp
  string id = 1;
  int64 bid = 2;
  int64 timestamp = 3;
}

message Ack {
  BidStatus status = 1;
  int64 timestamp = 2;
}

enum BidStatus {
  FAIL = 0;
  SUCCESS = 1;
  EXCEPTION = 2;
}

message Result {
  int64 idFromHighestBidder = 1;
  int64 highestBid = 2;
  bool auctionIsOngoing = 3;
  int64 timeLeft = 4; //Kan fjernes hvis kritisk - T J
}

message Bidder {
  int64 id = 1;
  int64 timestamp = 2; //Skal timestamp gives?? -T J
}

message Backup {
  bool ongoing = 1;
  int64 higestBid = 2;
  int64 timestamp = 3;
  string highestBidder = 4;
  int64 endTime = 5;
}

message Empty{}

 service ITUDatabase {
  rpc TestConnection (Empty) returns (Empty) {};
  rpc PlaceBid (Bid) returns (Ack) {};
  rpc PrintStatus (Empty) returns (Result) {};
  rpc AddBidder (Bidder) returns (Empty) {};
  rpc SendBackup (Backup) returns (Bid) {};
 }
